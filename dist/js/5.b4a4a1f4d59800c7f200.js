(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{240:function(e,a,t){"use strict";t.r(a);var n=t(78),o=t.n(n),r=(t(122),t(79)),i=t.n(r),s=(t(245),t(246)),m=t.n(s),l=(t(248),t(249)),c=t.n(l),u=(t(123),t(124)),p=t.n(u),f=(t(250),t(251)),d=t.n(f),E=t(77),y=t.n(E),_=t(0),b=t.n(_),h=t(16),C=t.n(h),k=t(46),v=t(244),N=t(279),g=t.n(N),O=t(80);a.default=function(e){var a=Object(_.useContext)(k.a),t=a.state,n=a.dispatch,r=t.uid,s=t.username,l=t.socket,u=t.roomData,f=t.onlineCount,E=Object(_.useState)(!r),h=y()(E,2),N=h[0],S=h[1],I=Object(_.useState)(""),P=y()(I,2),j=P[0],w=P[1],D=Object(_.useState)(!1),Q=y()(D,2),R=Q[0],x=Q[1],J=Object(_.useState)(s),L=y()(J,2),W=L[0],q=L[1],G=Object(_.useState)(!1),M=y()(G,2),T=M[0],U=M[1],B=Object(_.useState)(""),K=y()(B,2),Z=K[0],X=K[1],z=u.filter((function(e){return 0===e.type}));return Object(_.useEffect)((function(){r&&l.emit("login",{uid:r,username:s}),l.emit("updateHome"),l.on("homeInfo",(function(e){n({type:"update_info",payload:e})})),l.on("login",(function(e){n({type:"login",payload:e})})),l.on("nameUpdated",(function(e){n({type:"update_user_name",payload:e})})),l.on("searchRoom",(function(e){U(!1),d.a.info(e,1)})),l.on("enterRoom",(function(a){n({type:"update_room",payload:a}),e.history.push("/room/".concat(a.id))})),Object(v.a)(l)}),[]),b.a.createElement("div",{className:g.a.home},b.a.createElement(O.a,{title:"你画我猜-大厅",left:b.a.createElement(p.a,{type:"search",onClick:function(){U(!0)}})}),b.a.createElement(m.a,{visible:N,title:"欢迎进入你画我猜",transparent:!0,maskClosable:!0,onClose:function(){S(!1)},footer:[{text:"ok",onPress:function(){j.trim()?(l.emit("createUser",{name:j}),S(!1)):d.a.info("不能为空哦",1)}}]},b.a.createElement(c.a,{placeholder:"请输入游戏昵称",value:j,onChange:function(e){w(e)}})),b.a.createElement(m.a,{title:"寻找房间",visible:T,transparent:!0,maskClosable:!0,onClose:function(){U(!1)},footer:[{text:"ok",onPress:function(){Z.trim()?(l.emit("searchRoom",{roomId:Z,player:{username:s,uid:r}}),U(!1)):d.a.info("不能为空哦",1)}}]},b.a.createElement(c.a,{placeholder:"输入房间号",value:Z,onChange:function(e){X(e)}})),b.a.createElement(m.a,{visible:R,title:"修改昵称",transparent:!0,maskClosable:!0,onClose:function(){x(!1)},footer:[{text:"ok",onPress:function(){W.trim()?(l.emit("updateUserName",{name:W,uid:r}),x(!1)):d.a.info("不能为空哦")}}]},b.a.createElement(c.a,{placeholder:"请输入修改昵称",value:W,onChange:function(e){q(e)}})),s&&b.a.createElement("div",{className:g.a.userWrapper},b.a.createElement("span",{className:g.a.userName},s),b.a.createElement(i.a,{type:"primary",inline:!0,size:"small",onClick:function(){x(!0)}},"修改昵称")),!z.length&&b.a.createElement("div",{className:g.a.noRoom},"没人玩啦"),z.length>0&&b.a.createElement("ul",{className:g.a.roomList},z.map((function(a){return b.a.createElement("li",{className:g.a.roomItem,key:a.id},b.a.createElement("div",{className:C()(g.a.roomInfo,o()({},g.a.disableEnter,1===a.status))},b.a.createElement("span",{className:g.a.roomName},a.id,": "),b.a.createElement("span",{className:g.a.roomMaster},a.name),b.a.createElement("span",{className:g.a.roomStatus},0===a.status?"准备中":"游戏中")),b.a.createElement("div",{className:g.a.roomPlayer},b.a.createElement("span",{className:g.a.playerCount},"玩家人数: ",a.playersCount," / 8"),b.a.createElement(i.a,{type:"primary",inline:!0,size:"small",disabled:1===a.status,onClick:function(){console.log("enter"),1!==a.status&&(l.emit("enterRoom",{player:{username:s,uid:r},socketRoom:a.socketRoom,roomId:a.id}),e.history.push("/room/".concat(a.id)))}},"加入房间")))}))),b.a.createElement(i.a,{type:"primary",style:{marginTop:40,marginLeft:15,marginRight:15},onClick:function(){e.history.push("/create-room")}},"没有想要的房间？创建一个"),b.a.createElement("div",{className:g.a.onlineCount},"在线人数: ",f))}},244:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));t(245);var n=t(246),o=t.n(n),r=function(e){e.on("disconnect",(function(){o.a.alert("阿欧","服务器宕机了，老铁～",[{text:"刷新试试吧",onPress:function(){window.location.href="/"}}])}))}},279:function(e,a,t){e.exports={home:"_3X_QLtVd8-cqkbV429q-90","user-wrapper":"_3TXj-q6yJLbEMWmn8bQfc7",userWrapper:"_3TXj-q6yJLbEMWmn8bQfc7","user-name":"_1m4bENFdW2Ds7glXmfiPLz",userName:"_1m4bENFdW2Ds7glXmfiPLz","no-room":"Sli5m4xwJLvBrWdq7ari_",noRoom:"Sli5m4xwJLvBrWdq7ari_","room-list":"_2CxtUD3ht7iqwQ1iQIVDlL",roomList:"_2CxtUD3ht7iqwQ1iQIVDlL","room-item":"_1mZl6ikHxfaCY4cO8NOPaD",roomItem:"_1mZl6ikHxfaCY4cO8NOPaD","room-info":"_2IsYf9Wplg04eIDQ_1_gsE",roomInfo:"_2IsYf9Wplg04eIDQ_1_gsE","disable-enter":"fQap2ZyJysMWhk7DSelOm",disableEnter:"fQap2ZyJysMWhk7DSelOm","room-master":"_1qiNKEZ-cPaEP9kTv24dmo",roomMaster:"_1qiNKEZ-cPaEP9kTv24dmo","room-player":"_3phheuGimIKRGiBkteQ7O",roomPlayer:"_3phheuGimIKRGiBkteQ7O","player-count":"_36_SBlvJ_bJy7bcaCSEM5F",playerCount:"_36_SBlvJ_bJy7bcaCSEM5F","online-count":"_2GSl6GToKvvjt81NRudEOU",onlineCount:"_2GSl6GToKvvjt81NRudEOU"}}}]);
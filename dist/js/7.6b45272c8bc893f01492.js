(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{233:function(e,t,a){"use strict";a.r(t);a(238);var n=a(239),o=a.n(n),r=(a(241),a(242)),i=a.n(r),s=(a(122),a(123)),m=a.n(s),l=(a(243),a(244)),c=a.n(l),u=a(77),p=a.n(u),f=(a(121),a(79)),d=a.n(f),E=a(78),y=a.n(E),b=a(0),_=a.n(b),h=a(16),C=a.n(h),k=a(46),v=a(237),N=a(272),O=a.n(N),g=a(80),S=Object(b.memo)((function(e){var t=e.list,a=e.onEnter;return _.a.createElement("ul",{className:O.a.roomList},t.map((function(e){return _.a.createElement("li",{className:O.a.roomItem,key:e.id},_.a.createElement("div",{className:C()(O.a.roomInfo,y()({},O.a.disableEnter,1===e.status))},_.a.createElement("span",{className:O.a.roomName},e.id,": "),_.a.createElement("span",{className:O.a.roomMaster},e.name),_.a.createElement("span",{className:O.a.roomStatus},0===e.status?"准备中":"游戏中")),_.a.createElement("div",{className:O.a.roomPlayer},_.a.createElement("span",{className:O.a.playerCount},"玩家人数: ",e.playersCount," / 8"),_.a.createElement(d.a,{type:"primary",inline:!0,size:"small",disabled:1===e.status,onClick:function(){return a(e)}},"加入房间")))})))}));t.default=function(e){var t=e.history,a=Object(b.useContext)(k.a),n=a.state,r=a.dispatch,s=n.uid,l=n.username,u=n.socket,f=n.roomData,E=n.onlineCount,y=Object(b.useState)(!s),h=p()(y,2),C=h[0],N=h[1],j=Object(b.useState)(""),I=p()(j,2),P=I[0],w=I[1],D=Object(b.useState)(!1),Q=p()(D,2),R=Q[0],x=Q[1],J=Object(b.useState)(l),L=p()(J,2),W=L[0],q=L[1],M=Object(b.useState)(!1),G=p()(M,2),T=G[0],U=G[1],B=Object(b.useState)(""),K=p()(B,2),Z=K[0],X=K[1],z=Object(b.useMemo)((function(){return f.filter((function(e){return 0===e.type}))}),[f]),F=Object(b.useCallback)((function(t){console.log("enter"),1!==t.status&&(u.emit("enterRoom",{player:{username:l,uid:s},socketRoom:t.socketRoom,roomId:t.id}),e.history.push("/room/".concat(t.id)))}),[u,s,l,t]);return Object(b.useEffect)((function(){s&&u.emit("login",{uid:s,username:l}),u.emit("updateHome"),u.on("homeInfo",(function(e){r({type:"update_info",payload:e})})),u.on("login",(function(e){r({type:"login",payload:e})})),u.on("nameUpdated",(function(e){r({type:"update_user_name",payload:e})})),u.on("searchRoom",(function(e){U(!1),c.a.info(e,1)})),u.on("enterRoom",(function(t){r({type:"update_room",payload:t}),e.history.push("/room/".concat(t.id))})),Object(v.a)(u)}),[]),_.a.createElement("div",{className:O.a.home},_.a.createElement(g.a,{title:"你画我猜-大厅",left:_.a.createElement(m.a,{type:"search",onClick:function(){U(!0)}})}),_.a.createElement(o.a,{visible:C,title:"欢迎进入你画我猜",transparent:!0,maskClosable:!0,onClose:function(){N(!1)},footer:[{text:"ok",onPress:function(){P.trim()?(u.emit("createUser",{name:P}),N(!1)):c.a.info("不能为空哦",1)}}]},_.a.createElement(i.a,{placeholder:"请输入游戏昵称",value:P,onChange:function(e){w(e)}})),_.a.createElement(o.a,{title:"寻找房间",visible:T,transparent:!0,maskClosable:!0,onClose:function(){U(!1)},footer:[{text:"ok",onPress:function(){Z.trim()?(u.emit("searchRoom",{roomId:Z,player:{username:l,uid:s}}),U(!1)):c.a.info("不能为空哦",1)}}]},_.a.createElement(i.a,{placeholder:"输入房间号",value:Z,onChange:function(e){X(e)}})),_.a.createElement(o.a,{visible:R,title:"修改昵称",transparent:!0,maskClosable:!0,onClose:function(){x(!1)},footer:[{text:"ok",onPress:function(){W.trim()?(u.emit("updateUserName",{name:W,uid:s}),x(!1)):c.a.info("不能为空哦")}}]},_.a.createElement(i.a,{placeholder:"请输入修改昵称",value:W,onChange:function(e){q(e)}})),l&&_.a.createElement("div",{className:O.a.userWrapper},_.a.createElement("span",{className:O.a.userName},l),_.a.createElement(d.a,{type:"primary",inline:!0,size:"small",onClick:function(){x(!0)}},"修改昵称")),!z.length&&_.a.createElement("div",{className:O.a.noRoom},"没人玩啦"),z.length>0&&_.a.createElement(S,{list:z,onEnter:F}),_.a.createElement(d.a,{type:"primary",style:{marginTop:40,marginLeft:15,marginRight:15},onClick:function(){e.history.push("/create-room")}},"没有想要的房间？创建一个"),_.a.createElement("div",{className:O.a.onlineCount},"在线人数: ",E))}},237:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(238);var n=a(239),o=a.n(n),r=function(e){e.on("disconnect",(function(){o.a.alert("阿欧","服务器宕机了，老铁～",[{text:"刷新试试吧",onPress:function(){window.location.href="/"}}])}))}},272:function(e,t,a){e.exports={home:"_3X_QLtVd8-cqkbV429q-90","user-wrapper":"_3TXj-q6yJLbEMWmn8bQfc7",userWrapper:"_3TXj-q6yJLbEMWmn8bQfc7","user-name":"_1m4bENFdW2Ds7glXmfiPLz",userName:"_1m4bENFdW2Ds7glXmfiPLz","no-room":"Sli5m4xwJLvBrWdq7ari_",noRoom:"Sli5m4xwJLvBrWdq7ari_","room-list":"_2CxtUD3ht7iqwQ1iQIVDlL",roomList:"_2CxtUD3ht7iqwQ1iQIVDlL","room-item":"_1mZl6ikHxfaCY4cO8NOPaD",roomItem:"_1mZl6ikHxfaCY4cO8NOPaD","room-info":"_2IsYf9Wplg04eIDQ_1_gsE",roomInfo:"_2IsYf9Wplg04eIDQ_1_gsE","disable-enter":"fQap2ZyJysMWhk7DSelOm",disableEnter:"fQap2ZyJysMWhk7DSelOm","room-master":"_1qiNKEZ-cPaEP9kTv24dmo",roomMaster:"_1qiNKEZ-cPaEP9kTv24dmo","room-player":"_3phheuGimIKRGiBkteQ7O",roomPlayer:"_3phheuGimIKRGiBkteQ7O","player-count":"_36_SBlvJ_bJy7bcaCSEM5F",playerCount:"_36_SBlvJ_bJy7bcaCSEM5F","online-count":"_2GSl6GToKvvjt81NRudEOU",onlineCount:"_2GSl6GToKvvjt81NRudEOU"}}}]);
//# sourceMappingURL=7.6b45272c8bc893f01492.js.map